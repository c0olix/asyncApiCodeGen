asyncapi: 2.2.0
info:
  title: Example
  version: 0.1.0
servers:
  production:
    url: broker.mycompany.com
    protocol: amqp
    description: This is "My Company" broker.
channels:
  USER_DELETED:
    publish:
      operationId: consumeUserDeletedEvent
      message:
        $ref: "#/components/messages/UserDeletedEvent"
  USER_LOCKED:
    subscribe:
      operationId: produceUserLockedEvent
      message:
        $ref: "#/components/messages/UserLockedEvent"
components:
  messages:
    UserDeletedEvent:
      name: UserDeletedEvent
      description: A brief description for the UserDeletedEvent
      payload:
        $ref: "#/components/schemas/UserDeletedPayload"
    UserLockedEvent:
      name: UserLockedEvent
      description: A brief description for the UserLockedEvent
      payload:
        $ref: "#/components/schemas/UserLockedPayload"
  schemas:
    UserDeletedPayload:
      type: object
      title: UserDeletedPayload
      required:
        - username
      properties:
        username:
          type: string
          format: email
    UserLockedPayload:
      type: object
      title: UserDeletedPayload
      required:
        - username
      properties:
        username:
          type: string
          format: email
        reason:
          type: string